<%- include('layout', { 
    body: `
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">
                <i class="bi bi-info-circle text-warning me-2"></i>
                Model Information
            </h1>
            <p class="lead text-muted">
                Details about the trained enrollment prediction model
            </p>
        </div>
    </div>

    <!-- Loading State -->
    <div id="model-loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="text-muted mt-3">Loading model information...</p>
    </div>

    <!-- Model Content -->
    <div id="model-content" class="d-none">
        <!-- Model Overview -->
        <div class="row g-4 mb-4">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-cpu me-2"></i>Model Overview</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="text-muted">Model Type</label>
                                    <h4 id="model-type">--</h4>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="text-muted">Model Version</label>
                                    <h4 id="model-version">--</h4>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="text-muted">Training Date</label>
                                    <h4 id="training-date">--</h4>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-item">
                                    <label class="text-muted">Training Duration</label>
                                    <h4 id="training-duration">--</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm h-100 bg-primary text-white">
                    <div class="card-body d-flex flex-column justify-content-center text-center">
                        <i class="bi bi-trophy display-3 mb-3"></i>
                        <h5>Best Model Score</h5>
                        <h1 class="display-4 mb-0" id="best-score">--</h1>
                        <p class="mb-0">AUC-ROC</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-speedometer me-2"></i>Performance Metrics</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-4">
                            <div class="col-md-2 col-sm-4 col-6">
                                <div class="metric-card text-center p-3 rounded bg-light">
                                    <h3 class="text-primary mb-1" id="metric-accuracy">--</h3>
                                    <small class="text-muted">Accuracy</small>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-4 col-6">
                                <div class="metric-card text-center p-3 rounded bg-light">
                                    <h3 class="text-success mb-1" id="metric-precision">--</h3>
                                    <small class="text-muted">Precision</small>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-4 col-6">
                                <div class="metric-card text-center p-3 rounded bg-light">
                                    <h3 class="text-info mb-1" id="metric-recall">--</h3>
                                    <small class="text-muted">Recall</small>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-4 col-6">
                                <div class="metric-card text-center p-3 rounded bg-light">
                                    <h3 class="text-warning mb-1" id="metric-f1">--</h3>
                                    <small class="text-muted">F1 Score</small>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-4 col-6">
                                <div class="metric-card text-center p-3 rounded bg-light">
                                    <h3 class="text-danger mb-1" id="metric-auc">--</h3>
                                    <small class="text-muted">AUC-ROC</small>
                                </div>
                            </div>
                            <div class="col-md-2 col-sm-4 col-6">
                                <div class="metric-card text-center p-3 rounded bg-light">
                                    <h3 class="text-secondary mb-1" id="metric-log-loss">--</h3>
                                    <small class="text-muted">Log Loss</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature Importance & Confusion Matrix -->
        <div class="row g-4 mb-4">
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-bar-chart-steps me-2"></i>Feature Importance</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="featureImportanceChart" height="300"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-grid me-2"></i>Confusion Matrix</h5>
                    </div>
                    <div class="card-body d-flex align-items-center justify-content-center">
                        <div class="confusion-matrix">
                            <table class="table table-bordered text-center mb-0">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th colspan="2" class="bg-light">Predicted</th>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <th class="bg-light">No Enroll</th>
                                        <th class="bg-light">Enroll</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th class="bg-light" rowspan="2" style="vertical-align: middle;">Actual</th>
                                        <td class="bg-success-subtle" id="cm-tn">--</td>
                                        <td class="bg-danger-subtle" id="cm-fp">--</td>
                                    </tr>
                                    <tr>
                                        <td class="bg-danger-subtle" id="cm-fn">--</td>
                                        <td class="bg-success-subtle" id="cm-tp">--</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="mt-2 text-center text-muted small">
                                <span class="text-success">■</span> Correct Predictions
                                <span class="text-danger ms-3">■</span> Incorrect Predictions
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Parameters -->
        <div class="row g-4 mb-4">
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-sliders me-2"></i>Hyperparameters</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead class="table-light">
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Value</th>
                                    </tr>
                                </thead>
                                <tbody id="hyperparameters-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-list-check me-2"></i>Selected Features</h5>
                    </div>
                    <div class="card-body">
                        <div class="feature-list" id="selected-features">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Comparison -->
        <div class="row g-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-transparent">
                        <h5 class="mb-0"><i class="bi bi-clipboard-data me-2"></i>Model Comparison</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="model-comparison-table">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Model</th>
                                        <th>Accuracy</th>
                                        <th>Precision</th>
                                        <th>Recall</th>
                                        <th>F1 Score</th>
                                        <th>AUC-ROC</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="model-comparison-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Error State -->
    <div id="model-error" class="d-none">
        <div class="alert alert-warning text-center">
            <i class="bi bi-exclamation-triangle display-4"></i>
            <h4 class="mt-3">Model Not Found</h4>
            <p>No trained model found. Please run the ML pipeline first to train the model.</p>
            <a href="/" class="btn btn-primary">
                <i class="bi bi-house me-2"></i>Go to Dashboard
            </a>
        </div>
    </div>
    `,
    scripts: '<script src="/js/model-info.js"></script>'
}) %>
